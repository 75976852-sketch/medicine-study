# 中药数据导入说明

由于您已经提供了"中药学.pdf"文件，以下是导入完整中药数据的几种方法：

## 方法一：使用Python脚本自动提取（推荐，如果环境支持）

### 1. 安装Python依赖

```bash
pip3 install pdfplumber
# 或者
python3 -m pip install pdfplumber --user
```

### 2. 运行提取脚本

```bash
python3 extract_medicine_data.py
```

### 3. 查看提取结果

脚本会：
- 在控制台显示提取进度
- 显示前3个示例中药
- 生成 `medicine_data.json` 文件
- 生成 `medicine_database.js` 文件（可直接使用）

### 4. 替换数据库

打开生成的 `medicine_database.js` 文件，将其中的 `medicineDatabase` 数组内容复制到 `script.js` 文件中，替换现有的 `medicineDatabase` 数组。

**注意：** 由于PDF格式可能复杂，如果自动提取效果不理想，可能需要根据PDF实际格式调整 `extract_medicine_data.py` 中的解析逻辑。

## 方法二：手动提取并添加

如果自动提取无法正常工作，可以手动从PDF中提取数据：

### 1. 数据格式

在 `script.js` 文件中找到 `medicineDatabase` 数组，按照以下格式添加中药数据：

```javascript
{
    id: 1,  // 唯一ID（数字，从1开始递增）
    name: '人参',  // 名称（必须）
    nature: '甘、微苦，微温',  // 性味
    channel: '归脾、肺、心、肾经',  // 归经
    effect: '大补元气，复脉固脱，补脾益肺，生津养血，安神益智',  // 功效
    indication: '体虚欲脱，肢冷脉微；脾虚食少，肺虚喘咳；津伤口渴，内热消渴；气血亏虚，久病虚羸；惊悸失眠'  // 主治
}
```

### 2. 字段说明

- **id**: 唯一标识符，从1开始递增
- **name**: 中药名称（必填）
- **nature**: 性味（可选，如"甘、微苦，微温"）
- **channel**: 归经（可选，如"归脾、肺、心、肾经"）
- **effect**: 功效（可选）
- **indication**: 主治（可选）

**注意：** 
- 不需要包含 `alias`（别名）和 `usage`（用法用量）字段，这些已在界面中删除
- 如果某个字段为空，可以不写该字段，或使用空字符串 `''`

### 3. 示例

```javascript
const medicineDatabase = [
    { id: 1, name: '人参', nature: '甘、微苦，微温', channel: '归脾、肺、心、肾经', effect: '大补元气，复脉固脱，补脾益肺，生津养血，安神益智', indication: '体虚欲脱，肢冷脉微；脾虚食少，肺虚喘咳；津伤口渴，内热消渴；气血亏虚，久病虚羸；惊悸失眠' },
    { id: 2, name: '黄芪', nature: '甘，微温', channel: '归肺、脾经', effect: '补气升阳，固表止汗，利水消肿，生津养血，行滞通痹，托毒排脓，敛疮生肌', indication: '气虚乏力，食少便溏；中气下陷，久泻脱肛；表虚自汗；气虚水肿；内热消渴；血虚萎黄；半身不遂，痹痛麻木；痈疽难溃，久溃不敛' },
    // ... 更多中药
];
```

## 方法三：使用Excel/CSV转换（如果PDF无法直接处理）

如果PDF提取困难，可以：

1. 将PDF内容复制到Excel表格中
2. 整理成以下列：名称、性味、归经、功效、主治
3. 使用以下Python脚本转换为JavaScript格式：

```python
import pandas as pd
import json

# 读取Excel文件
df = pd.read_excel('中药数据.xlsx')

# 转换为JavaScript格式
js_code = "const medicineDatabase = [\n"
for idx, row in df.iterrows():
    js_code += f"    {{ id: {idx+1}, name: '{row['名称']}', "
    js_code += f"nature: '{row.get('性味', '')}', "
    js_code += f"channel: '{row.get('归经', '')}', "
    js_code += f"effect: '{row.get('功效', '')}', "
    js_code += f"indication: '{row.get('主治', '')}' }},\n"
js_code += "];\n"

with open('medicine_database.js', 'w', encoding='utf-8') as f:
    f.write(js_code)

print("转换完成！")
```

## 常见问题

### Q: 如何知道数据是否导入成功？

A: 打开应用后，查看"总进度"统计，应该显示已导入的中药总数。

### Q: 导入数据后需要重置学习记录吗？

A: 如果您想从头开始学习新的完整数据库，可以点击"重置数据"按钮。

### Q: 能否只添加部分中药？

A: 可以，您可以只添加需要的部分中药到数据库中。

### Q: PDF提取脚本报错怎么办？

A: 可以查看控制台输出的前3页内容，了解PDF格式，然后手动调整 `extract_medicine_data.py` 中的解析逻辑，或使用方法二手动添加。
